"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[59959],{193163:(e,t,r)=>{r.d(t,{T7:()=>n,Y_:()=>d,bl:()=>a,d9:()=>u,nx:()=>c,xt:()=>s});var i=r(5859),o=r(149722);function n(e,t,r,i){let o=r.toLowerCase().replace(/[.,\/#!?$%\^&\*+;:{}=\-_`~()\â€™'"]/g,"").trim().replace(/\s+/g,"-");return`/today/${t?"shop":0===e||2===e?"trending":1===e?"best":"article"}/${encodeURIComponent(o)}/${i}/`}let l={en:["US","GB","CA","IN","AU","ID"],es:["MX","PE","AR","CL","CO","ES","VE","UY","PY","EC","BO","CR","DO","SV","GT","HN","NI","PR","PA"],pt:["BR"],de:["DE","AT","CH"],fr:["FR"],id:["ID"],ja:["JP"],it:["IT"],sv:["SE"]};function a(){let e=(0,i.B)(),t=(0,o.Z)(),r=t.isAuth?t.country:e.country;if(void 0===e||void 0===e.locale)return!1;let n=e.locale.substring(0,2);return l[n]?.includes(r)}let s=(e,t,r)=>e||t||r||"",d=e=>"todayarticle"===e.type,c=e=>Array.isArray(e)&&e.length>0&&e.every(e=>"story"===e.type),u=(e,t)=>(e??1)/(t??1)},659959:(e,t,r)=>{r.d(t,{Z:()=>D});var i=r(667294),o=r(883119),n=r(587703),l=r(887582),a=r(340523),s=r(676554),d=r(193163),c=r(623409),u=r(233731),g=r(939809),h=r(205841),p=r(399837),y=r(785893);function m({articleCreatorUserAvatar:e,articleCreatorUserName:t,backgroundColor:r,coverImageUrl:n,height:l,pwtTrackImageLoad:a,subtitle:s,title:d,width:c}){return(0,y.jsxs)(i.Fragment,{children:[(0,y.jsx)(o.xu,{height:l,width:c,children:(0,y.jsx)(o.Ee,{alt:"",color:r,fit:"cover",naturalHeight:1,naturalWidth:1,onLoad:a,role:"presentation",src:n})}),(0,y.jsx)(o.xu,{dangerouslySetInlineStyle:p.aG.bubbleOverlay,height:l,left:!0,position:"absolute",top:!0,width:c}),(0,y.jsxs)(o.xu,{alignItems:"center",display:"flex",height:l,justifyContent:"center",marginTop:4,padding:8,position:"absolute",top:!0,width:c,children:[(0,y.jsxs)(o.kC,{alignItems:"stretch",direction:"column",gap:{row:0,column:1},justifyContent:"start",children:[s&&(0,y.jsx)(o.xv,{align:"center",color:"light",lineClamp:1,overflow:"normal",size:"300",children:s}),(0,y.jsx)(o.X6,{accessibilityLevel:1,align:"center",color:"light",lineClamp:3,overflow:"normal",size:"400",children:d})]}),!!t&&!!e&&(0,y.jsx)(o.xu,{bottom:!0,marginBottom:10,position:"absolute",children:(0,y.jsxs)(o.kC,{alignItems:"center",direction:"row",gap:{row:1,column:0},justifyContent:"center",children:[(0,y.jsx)(h.qE,{name:t,size:"xs",src:e}),(0,y.jsx)(o.xv,{align:"center",color:"light",lineClamp:1,overflow:"normal",size:"200",children:t})]})})]})]})}function x({auxData:e,bubble:t,height:r,immersiveHeader:l,onTouch:a,pwtSurfaceContext:s,referringSource:h,slotIndex:p,storyId:x,storyType:_,viewParameter:f,viewType:b}){let{article_creator_user:v,dominant_color_css:j,feed_source:w,id:I,image_urls:S,is_product_pin_feed:C,subtitle:T,title:F}=t,k=(0,n.Z)(),D=(0,c.Z)(),[P,A]=(0,i.useState)();if(!F||!I||!S)return null;let B=(0,d.T7)(w??1,C??!1,F,I),L=()=>{D({action:"click",item:"search-suggestion"}),k({view_type:b,view_parameter:f,object_id_str:I,component:15035,event_type:102,aux_data:{grid_index:p,story_id:x,story_type:_,curated_board_id:I}}),a&&a({query:F})},E="100%";if(!P)return(0,y.jsx)(o.xu,{ref:e=>{e&&A(e.offsetWidth*Number.parseFloat(r)/100)},dangerouslySetInlineStyle:{__style:{paddingBottom:Number.parseFloat(r)+"%",width:E}}});let U=()=>{s&&s.markConstraintComplete("RenderSearchLandingPageBubbles")};return(0,y.jsx)(g.PR,{auxData:{grid_index:p.toString(),story_id:x,story_type:_,curated_board_id:I,...e},component:15035,impressionData:{storyIdStr:x},loggingId:x,objectIdStr:x,slotIndex:p,viewParameter:f,viewType:b,children:({impressionTrackerRef:e})=>(0,y.jsx)(o.xu,{ref:e,"data-test-id":"search-suggestion-curated-board-bubble","data-test-type":h,overflow:"hidden",position:"relative",rounding:l?void 0:4,children:(0,y.jsx)(u.MZ,{isAppUpsellDisabled:!0,onTouch:L,to:B,children:(0,y.jsx)(m,{articleCreatorUserAvatar:v?.image_small_url,articleCreatorUserName:v?.full_name,backgroundColor:j??void 0,coverImageUrl:(S??[])[0],height:P,pwtTrackImageLoad:U,subtitle:T??"",title:F,width:E})})})})}var _=r(799648),f=r(140017),b=r(696534);let v=["#FFF8FA","#F8F7FF","#F7FBFF","#F7FDFC","#F6FDF5","#FFFEDB","#FFF6EB"];function j({backgroundColor:e,coverImageUrl:t,height:r,imgBackgroundColor:n,isDarkBackground:l,pwtTrackImageLoad:a,subtitle:s,title:d,width:c}){return(0,y.jsxs)(i.Fragment,{children:[(0,y.jsxs)(o.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:e||v[d.charCodeAt(0)%v.length]}},height:r,position:"relative",width:c,children:[(0,b.Yc)()&&(0,y.jsx)(o.xu,{dangerouslySetInlineStyle:p.aG.bubbleOverlay,height:"100%",left:!0,position:"absolute",top:!0,width:"100%"}),(0,y.jsx)(o.xu,{alignItems:"center",display:"flex",height:.6*r,justifyContent:"center",marginTop:8,padding:8,position:"absolute",top:!0,width:c,children:(0,y.jsxs)(o.kC,{alignItems:"stretch",direction:"column",gap:{row:0,column:1},justifyContent:"start",children:[s&&(0,y.jsx)(o.xv,{align:"center",color:l?"light":"dark",overflow:"normal",size:"300",children:s}),(0,y.jsx)(o.X6,{accessibilityLevel:1,align:"center",color:l?"light":"dark",overflow:"normal",size:"400",children:d})]})})]}),(0,y.jsx)(o.xu,{alignItems:"end",bottom:!0,display:"flex",height:.4*r,justifyContent:"center",marginBottom:-5,position:"absolute",width:c,children:t.slice(0,3).map((e,t)=>(0,y.jsx)(o.xu,{dangerouslySetInlineStyle:p.aG.bubbleOverlay,height:1===t?"100%":"80%",marginStart:0!==t?-5:void 0,overflow:"hidden",rounding:4,width:1===t?"36%":"28.8%",zIndex:1===t?new o.Ry(1):void 0,children:(0,y.jsx)(o.Ee,{alt:"",color:n,fit:"cover",naturalHeight:1,naturalWidth:1,onLoad:a,role:"presentation",src:e})},`TripleImageBubble-${e}`))})]})}function w({auxData:e,bubble:t,height:r,onTouch:l,pwtSurfaceContext:a,referringSource:s,slotIndex:d,storyId:h,storyType:p,viewParameter:m,viewType:x}){let{action:_,cover_images:b,dominant_colors:v,id:w,title:I}=t,S=(0,n.Z)(),C=(0,c.Z)(),[T,F]=(0,i.useState)(),k=(0,f.ZP)(),D=I?.format,P=_?.url,A=b?.map(e=>e["474x"]?.url??"");if(!D||!w||!A||!P)return null;let B=()=>{C({action:"click",item:"search-suggestion"}),S({view_type:x,view_parameter:m,object_id_str:w,event_type:102,aux_data:{grid_index:d,story_id:h,story_type:p}}),l&&l({query:D})},L="100%";if(!T)return(0,y.jsx)(o.xu,{ref:e=>{e&&F(e.offsetWidth*Number.parseFloat(r)/100)},dangerouslySetInlineStyle:{__style:{paddingBottom:Number.parseFloat(r)+"%",width:L}}});let E=()=>{a&&a.markConstraintComplete("RenderSearchLandingPageBubbles")};return(0,y.jsx)(g.fv,{auxData:{grid_index:d.toString(),story_id:h,story_type:p,...e},component:13865,impressionData:{storyIdStr:h},loggingId:h,objectIdStr:h,slotIndex:d,viewParameter:m,viewType:x,children:({impressionTrackerRef:e})=>(0,y.jsx)(o.xu,{ref:e,"data-test-id":"search-suggestion","data-test-type":s,position:"relative",children:(0,y.jsx)(u.MZ,{isAppUpsellDisabled:!0,onTouch:B,to:P,children:(0,y.jsx)(j,{coverImageUrl:A,height:T,imgBackgroundColor:v?.[1],pwtTrackImageLoad:E,subtitle:k._('Ideas for you', 'immersiveHeader.exploreArticle.subtitle', 'Ideas for you bubble\'s title in immersive header'),title:D,width:L})})})})}function I({bubble:e,font:t,height:r,width:i="100%",onTouch:o}){let{id:n,url:l,title:a,dominant_color_css:s,image_urls:d,buttonText:c}=e;return a&&n&&d?(0,y.jsx)(p.ZP,{backgroundColor:s??void 0,bubbleId:n,bubbleUrl:l,buttonFormat:{text:c,accessibilityLabel:c,href:l,size:"md"},contentAlign:"start",coverImageUrl:d[0],font:t,format:"interest",height:r,onTap:()=>o&&o({query:a}),textAlign:"start",title:a,width:i}):null}var S=r(214877),C=r(666472);function T({bubble:e,component:t,height:r,slotIndex:n,storyId:l,storyType:a,viewParameter:s,viewType:d}){let{logContextEvent:c}=(0,S.v)(),[u,g]=(0,i.useState)("string"==typeof r?void 0:r),{action:h,aux_fields:p,cover_images:m,dominant_colors:x,title:_,id:f}=e,b=(0,C.Z)({componentType:t??void 0,contextLogData:{story_type:a},impressionType:"Article",loggingId:f,slotIndex:n,viewParameter:s,viewType:d});if(!u)return(0,y.jsx)(o.xu,{ref:e=>{e&&g(e.offsetWidth*("string"==typeof r?Number.parseFloat(r):100)/100)},dangerouslySetInlineStyle:{__style:{paddingBottom:"string"==typeof r?Number.parseFloat(r)+"%":"100%"}},width:"100%"});if(!m||m.length<=0||!_)return null;let{button_background_color:v,button_text_color:j}=p,w=m.slice(0,2).map(e=>(e["474x"]||e["236x"])?.url);return(0,y.jsx)(o.Tg,{href:h?.url??"",onTap:()=>{c({aux_data:{story_id:l,story_type:"user_style_story_v2"},component:200,event_type:102,view_parameter:s,view_type:d})},rounding:4,children:(0,y.jsxs)(o.xu,{ref:b,alignItems:"center",display:"flex",height:u,justifyContent:"center",overflow:"hidden",position:"relative",rounding:4,width:"100%",children:[(0,y.jsx)(o.kC,{width:"100%",children:w.map((e,t)=>(0,y.jsx)(o.zd,{height:u,wash:!0,width:2===w.length?"50%":"100%",children:(0,y.jsx)(o.Ee,{alt:"",color:(x??[])[t],fit:"cover",naturalHeight:1,naturalWidth:1,role:"presentation",src:e??""})},t))}),(0,y.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:v}},paddingX:4,paddingY:3,position:"absolute",rounding:"pill",children:(0,y.jsx)(o.xv,{align:"center",weight:"bold",children:(0,y.jsx)("p",{style:{color:j,margin:"0"},children:_.format})})})]})})}function F({height:e,pwtTrackImageLoad:t,subtitle:r,title:n,videoUrl:l,width:a}){return(0,y.jsxs)(i.Fragment,{children:[(0,y.jsx)(o.xu,{height:e,width:a,children:(0,y.jsx)(o.nk,{aspectRatio:1,autoplay:!0,controls:!1,loop:!0,objectFit:"cover",onPlay:()=>{},onPlayError:()=>{},onReady:t,playsInline:!0,src:l})}),(0,y.jsx)(o.xu,{alignItems:"end",display:"flex",height:e,justifyContent:"center",padding:12,position:"absolute",top:!0,width:a,children:(0,y.jsxs)(o.kC,{alignItems:"stretch",direction:"column",gap:{row:0,column:1},justifyContent:"start",children:[r&&(0,y.jsx)(o.xv,{align:"center",color:"light",lineClamp:1,overflow:"normal",size:"300",children:r}),(0,y.jsx)(o.X6,{accessibilityLevel:1,align:"center",color:"light",lineClamp:3,overflow:"normal",size:"400",children:n})]})})]})}function k({auxData:e,bubble:t,height:r,immersiveHeader:l,onTouch:a,pwtSurfaceContext:s,referringSource:h,slotIndex:p,storyId:x,storyType:_,viewParameter:f,viewType:b}){let v;let{article_creator_user:w,display_color:I,dominant_color_css:S,feed_source:C,has_dark_display_color:T=!1,id:k,image_urls:D,is_product_pin_feed:P,is_video_cover:A,subtitle:B,title:L,video_urls:E}=t,U=(0,n.Z)(),R=(0,c.Z)(),[Z,z]=(0,i.useState)();if(!L||!k)return null;let N=A&&E&&E[0];if(N){if(!(v=(E??[]).find(e=>e&&e.endsWith(".mp4"))))return null}else if(!D)return null;let O=(0,d.T7)(C??1,P??!1,L,k),q=P?13865:13525,H=()=>{R({action:"click",item:"search-suggestion"}),U({view_type:b,view_parameter:f,object_id_str:k,component:q,event_type:102,aux_data:{grid_index:p,story_id:x,story_type:_,today_article_id:k}}),a&&a({query:L})},$="100%";if(!Z)return(0,y.jsx)(o.xu,{ref:e=>{e&&z(e.offsetWidth*Number.parseFloat(r)/100)},dangerouslySetInlineStyle:{__style:{paddingBottom:Number.parseFloat(r)+"%",width:$}}});let W=()=>{s&&s.markConstraintComplete("RenderSearchLandingPageBubbles")},M=D&&D.length>=3?(0,y.jsx)(j,{backgroundColor:I,coverImageUrl:D,height:Z,imgBackgroundColor:S??void 0,isDarkBackground:T,pwtTrackImageLoad:W,subtitle:B??"",title:L,width:$}):(0,y.jsx)(m,{articleCreatorUserAvatar:w?.image_small_url,articleCreatorUserName:w?.full_name,backgroundColor:S??void 0,coverImageUrl:(D??[])[0],height:Z,pwtTrackImageLoad:W,subtitle:B??"",title:L,width:$});return(0,y.jsx)(g.Y4,{auxData:{grid_index:p.toString(),story_id:x,story_type:_,today_article_id:k,...e},component:q,impressionData:{storyIdStr:x},loggingId:x,objectIdStr:x,slotIndex:p,viewParameter:f,viewType:b,children:({impressionTrackerRef:e})=>(0,y.jsx)(o.xu,{ref:e,"data-test-id":"search-suggestion-today-bubble","data-test-type":h,overflow:"hidden",position:"relative",rounding:l?void 0:4,children:(0,y.jsx)(u.MZ,{isAppUpsellDisabled:!0,onTouch:H,to:O,children:N?(0,y.jsx)(F,{height:Z,pwtTrackImageLoad:W,subtitle:B??"",title:L,videoUrl:v??"",width:$}):M})})})}function D({action:e,bubbles:t,component:r,format:d,onTouch:c,pwtSurfaceContext:u,query:g,referringSource:h,storyId:p,storyType:m,viewParameter:f,viewType:b}){let v,j;let S=t.map(({type:e,id:t})=>`${e??""}:${t??""}`).join("|"),C="slp_immersive_header"===m,F="user_style_story_v2"===m,D="shop_tab_upsell"===m,P="interest"===t[0].type,{windowWidth:A}=(0,l.Z)(),B=C?A:A-32,L=C?"100%":"75%",E=D?"50%":"100%",U=(0,n.Z)(),R=(0,i.useRef)(),Z=(0,i.useRef)(),[z,N]=(0,i.useState)(0),[O,q]=(0,i.useState)(C||P),[H,$]=(0,i.useState)(4e3),W=(0,i.useMemo)(()=>new Set,[]),{checkExperiment:M}=(0,a.F)(),X=M("mweb_curated_articles_to_board_shift").anyEnabled,Y=t.reduce((i,n,l)=>{let{type:a,schema:v}=n,j=null;switch(a||v){case"explorearticle":j=C?(0,y.jsx)(w,{auxData:{content_ids:S,story_type:m},bubble:n,height:L,onTouch:c,pwtSurfaceContext:u,referringSource:h,slotIndex:l,storyId:p,storyType:m,viewParameter:f,viewType:b}):F?(0,y.jsx)(T,{bubble:n,component:r,height:L,slotIndex:l,storyId:p,storyType:m,viewParameter:f,viewType:b}):(0,y.jsx)(_.Bp,{auxData:{content_ids:S,story_type:m},bubbleData:(0,_.VM)(n),format:d,height:L,onTouch:c,pwtSurfaceContext:u,referringSource:h,slotIndex:l,storyId:p,viewParameter:f,viewType:b});break;case"todayarticle":n.is_video_cover&&W.add(l),j=(0,y.jsx)(k,{auxData:{content_ids:S,story_type:m},bubble:n,height:L,immersiveHeader:C,onTouch:c,pwtSurfaceContext:u,referringSource:h,slotIndex:l,storyId:p,storyType:m,viewParameter:f,viewType:b});break;case"interest":j=(0,y.jsx)(I,{bubble:n,font:"md",height:"65%",onTouch:c});break;case"pin":j=l===t.length-1&&e?(0,y.jsx)(o.Tg,{href:e.url,onTap:()=>{U({view_type:b,view_parameter:f,component:r,element:179,event_type:102,aux_data:{content_ids:S,entered_query:g,grid_index:l,story_type:m}})},rounding:4,children:(0,y.jsxs)(o.xu,{dangerouslySetInlineStyle:{__style:{paddingTop:"calc(100%)"}},position:"relative",children:[(0,y.jsx)(o.xu,{bottom:!0,left:!0,position:"absolute",right:!0,top:!0,children:(0,y.jsx)(s.ZP,{auxData:{content_ids:S,entered_query:g,grid_index:l,story_type:m},componentType:r||14026,duploIsSquarePin:!0,duploQueryRef:null,imageOnlyOption:"image-only",pinId:n.id,slotIndex:l,viewParameter:f,viewType:b})}),(0,y.jsx)(o.xu,{alignItems:"center",bottom:!0,dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(0, 0, 0, 0.4)"}},display:"flex",justifyContent:"center",left:!0,position:"absolute",right:!0,rounding:4,top:!0,children:(0,y.jsx)(o.zx,{accessibilityLabel:e.text,size:"sm",text:e.text})})]})}):(0,y.jsx)(s.ZP,{auxData:{content_ids:S,entered_query:g,grid_index:l,story_type:m},componentType:r||14026,duploIsSquarePin:!0,duploQueryRef:null,pinId:n.id,slotIndex:l,trafficSource:"shop_feed",viewParameter:f,viewType:b});break;case"curatedboard":j=X?(0,y.jsx)(x,{auxData:{content_ids:S,story_type:m},bubble:n,height:L,immersiveHeader:C,onTouch:c,pwtSurfaceContext:u,referringSource:h,slotIndex:l,storyId:p,storyType:m,viewParameter:f,viewType:b}):null}return j?[...i,(0,y.jsx)(o.xu,{ref:0===l?Z:void 0,flex:"none",paddingX:C?void 0:1,width:E,children:j},`bubble-${n.id??""}`)]:i},[]),G=Y.length;return(0,i.useEffect)(()=>{W.has(z)&&t[z].video_duration?$(Math.min(1e4,t[z].video_duration)):$(4e3)},[z,t,W]),(0,i.useEffect)(()=>{let e;let t=R.current,r=Z.current;if(!t)return;let i=e=>{t.scrollTo({top:0,left:e,behavior:"smooth"})},o=()=>{clearTimeout(e),q(!1),setTimeout(()=>{let e=-(r?.getBoundingClientRect().left??0),t=Math.floor(((e=C?e:e+16)+B/2)/B);i(t!==G-1||C?t*B:t*B-4),N(t)},500)},n=()=>{let t=z===G-1?0:z+1;i(t*B),N(t),e=setTimeout(n,H)};return t.addEventListener("touchend",o),O&&(e=setTimeout(n,H)),()=>{clearTimeout(e),t.removeEventListener("touchend",o)}}),C||(v=P?3:4,j=3),(0,y.jsxs)(i.Fragment,{children:[(0,y.jsx)(o.xu,{marginEnd:-4,marginStart:-4,overflow:"hidden",width:"100vw",children:(0,y.jsx)(o.xu,{ref:R,"data-test-id":`carousel-bubble-wrapper-${m}`,display:"flex",marginBottom:-2,overflow:"scrollX",paddingX:v,paddingY:j,children:Y})}),(C||P)&&(0,y.jsx)(o.xu,{marginBottom:-2,marginTop:2,position:"relative",children:(0,y.jsx)(o.kC,{alignItems:"center",direction:"row",gap:{row:2,column:0},justifyContent:"center",children:[...Array(G).keys()].map(e=>(0,y.jsx)(o.xu,{color:z===e?"tertiary":"lightWash",height:6,rounding:"circle",width:6},`indicator-dot-${e}`))})})]})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/59959-2a539326c9799e2f.mjs.map